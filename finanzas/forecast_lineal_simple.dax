-- üìà ProyeccionVentas ‚Äî Estimaci√≥n b√°sica de ventas futuras
-- 
-- Esta medida DAX permite proyectar ventas futuras utilizando un promedio simple
-- basado en el hist√≥rico. Es √∫til cuando no hay datos reales a√∫n para ciertos
-- per√≠odos (por ejemplo, meses futuros).

-- üß† L√≥gica paso a paso:

ProyeccionVentas = 
VAR NumPeriodos = COUNTROWS(DimTiempo)
VAR VentasTotales = SUM(FactVentas[Importe])
VAR VentasPromedio = DIVIDE(VentasTotales, NumPeriodos)

RETURN
IF(
    MAX(DimTiempo[Fecha]) > MAX(FactVentas[Fecha]),
    VentasPromedio,
    BLANK()
)

-- NumPeriodos: cuenta cu√°ntas fechas hay en el modelo (d√≠a, mes, etc.)
-- VentasTotales: suma de todas las ventas hist√≥ricas
-- VentasPromedio: promedio simple por per√≠odo
-- IF(...): muestra el promedio solo si la fecha del contexto visual es posterior
-- a la √∫ltima venta registrada

-- üìä Ejemplo de salida:
-- Fecha        TotalVentas    ProyeccionVentas
-- 2024-06-30   1200           
-- 2024-07-01                1085 (promedio)
-- 2024-07-02                1085
-- 2024-07-03                1085

-- ‚úÖ Cu√°ndo usar esta medida:
-- - En gr√°ficos de l√≠nea combinando ventas reales + proyectadas
-- - En reportes ejecutivos donde se necesita mostrar proyecci√≥n futura simple
-- - Como referencia r√°pida antes de aplicar modelos m√°s complejos

-- üí° Consejo:
-- Puedes combinarla con TOTALYTD() o DATESYTD() para hacer un acumulado proyectado,
-- y compararlo contra un objetivo anual.
