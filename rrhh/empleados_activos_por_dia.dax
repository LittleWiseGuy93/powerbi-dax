-- üë• EmpleadosActivos ‚Äî Conteo de empleados vigentes en cada fecha
--
-- Esta medida calcula cu√°ntos empleados est√°n activos en un momento del tiempo.
-- Se basa en las fechas de inicio y fin de contrato para determinar si un empleado
-- estaba trabajando en esa fecha.

EmpleadosActivos = 
CALCULATE(
    DISTINCTCOUNT(DimEmpleado[ID]),
    FILTER(
        EmpleadoContratos,
        EmpleadoContratos[FechaInicio] <= MAX(DimTiempo[Fecha]) &&
        (
            ISBLANK(EmpleadoContratos[FechaFin]) || 
            EmpleadoContratos[FechaFin] >= MAX(DimTiempo[Fecha])
        )
    )
)

-- üß† Explicaci√≥n paso a paso:
-- - DISTINCTCOUNT(...): cuenta cada empleado solo una vez
-- - FILTER(...): aplica condiciones de vigencia seg√∫n fecha actual del contexto

-- Condici√≥n l√≥gica:
-- - FechaInicio ‚â§ Fecha actual (empleado ya ha comenzado)
-- - FechaFin ‚â• Fecha actual O est√° en blanco (empleado sigue activo o no tiene fecha de fin)

-- üìä Ejemplo:
-- Fecha               | Empleados Activos
-- ------------------- | -----------------
-- 2024-01-01          | 35
-- 2024-03-15          | 42
-- 2024-07-01          | 38

-- ‚úÖ Cu√°ndo usar esta medida:
-- - Para analizar plantilla laboral a lo largo del tiempo
-- - Para evaluar periodos con alta rotaci√≥n o crecimiento
-- - Como base para calcular ratios como ventas por empleado

-- üí° Consejo:
-- Aseg√∫rate de que `EmpleadoContratos` tenga relaci√≥n con `DimEmpleado`
-- (aunque no necesariamente directa con DimTiempo) para que el modelo funcione bien.
